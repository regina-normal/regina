<html>
<head>
    <link rel="stylesheet" type="text/css" href="regina.css">
    <title>Building Regina on Different Systems</title>
</head>
<body bgcolor="#FFFFFF" text="#000000"
    link="#0000EE" vlink="#551A8B" alink="#FF0000">

<h1><a name="contents">Building Regina on Different Systems</a></h1>

<p>
<table class="contentswrapper" cellspacing=0>
<tbody>
<tr><td valign="top">
    <table class="contents" cellspacing=0><tbody>
    <tr><td><a href="#linux">GNU/Linux</a></td></tr>
    <tr><td><a href="#fink">Fink on MacOS X</a></td></tr>
    <tr><td><a href="#cluster">Cluster environments</a></td></tr>
    <tr><td><a href="index.html">Back to main page ...</a></td></tr>
    </tbody></table>
</td></tr>
</tbody>
</table>
</p>
<p>
This page offers tips and tricks for building Regina successfully on
various operating systems.
</p>
<p>
As always, it is
<b>much simpler to download and install a ready-made package</b> if you can.
Check out the
<a href="http://sourceforge.net/project/showfiles.php?group_id=19698">Regina
download site</a> and see if your distribution is supported.
</p>
<p>
Please also see the page on <a href="source.html">building from sources</a>,
which lists the system requirements and gives a general overview of the
build process.
</p>
<p>
If these tips do not work for you, please
<a href="mailto:regina-devel@lists.sourceforge.net">mail us</a>
(including your <tt>CMakeCache.txt</tt> if possible) so that we can
update the build scripts (and this page) to reflect systems like yours.
</p>

<h2><a name="linux">GNU/Linux</a></h2>

<p>
To work properly, Regina needs to be installed in the same location as
KDE.  For most GNU/Linux distributions these days, this means installing
directly beneath <tt>/usr</tt>, not the default path <tt>/usr/local</tt>.
To fix this, you must pass the argument <tt>CMAKE_INSTALL_PREFIX</tt> to cmake:
</p>
<div class="example"><p>
<tt>example$ cmake -DCMAKE_INSTALL_PREFIX=/usr ..</tt>
</p></div>
<p>
If you run a 64-bit version of linux (the <tt>x86_64</tt> or
<tt>amd64</tt> architectures) and you use an RPM-based distribution
(such as Fedora, Mandriva or SuSE),
you will also need to set <tt>LIB_SUFFIX</tt>:
</p>
<div class="example"><p>
<tt>example$ cmake -DCMAKE_INSTALL_PREFIX=/usr -DLIB_SUFFIX=64 ..</tt>
</p></div>
<p>
This enables cmake to find the correct 64-bit development
libraries in <tt>/usr/lib64/</tt>, and ensures that Regina's libraries
are installed in the correct location.
</p>
<p>
If you are using a Debian-based distribution such as Debian or Ubuntu then
<b>you should not set <tt>LIB_SUFFIX</tt></b>, since 64-bit Debian places
libraries directly in <tt>/usr/lib/</tt>.
</p>

<h2><a name="fink">Fink on MacOS X</a></h2>

<p>
Fink installs KDE in the non-standard location
<tt>/sw/opt/kde4/mac/</tt>, and you need to jump through several hoops
to help cmake find it.
</p>
<p>
First, you need to set some environment variables:
</p>
<div class="example">
<p>
<tt>example$ export KDE4_TYPE=mac</tt><br>
<tt>example$ source /sw/sbin/kde4-buildenv.sh</tt>
</p>
</div>
<p>
The second command sets the environment variable
<tt>$KDE4_CMAKE_ARGS</tt>, which contains a long list of arguments for cmake.
</p>
<p>
In addition, you must ensure that cmake picks up the system python
installation, and not one of the fink installations.  You can do this
by passing an appropriate <tt>PYTHON_EXECUTABLE</tt> argument.  In full,
the cmake line is:
</p>
<div class="example">
<p>
<tt>example$ cmake $KDE4_CMAKE_ARGS -DPYTHON_EXECUTABLE=/usr/bin/python ..</tt>
</p>
</div>

<h2><a name="cluster">Cluster environments</a></h2>

<p>
If you plan to use Regina in a high-performance computing environment
such as a university cluster, there are several complications.
</p>
<h4>Disabling the graphical user interface</h4>
<p>
You will probably <i>not</i> want to
build the graphical user interface (in fact the cluster will probably
not have the KDE development libraries installed, which would cause
cmake to fail).
To fix this, set the argument <tt>DISABLE_KDEUI</tt>:
</p>
<div class="example"><p>
<tt>example$ cmake -DDISABLE_KDEUI=1 ..</tt>
</p></div>
<h4>Installing beneath your home directory</h4>
<p>
You will almost certainly not have root access
to the cluster, which means you will need to install Regina beneath your
home directory.  You do this by creating a top-level install directory
(say <tt>/home/bab/software</tt>) and then passing it as the install prefix
to cmake:
</p>
<div class="example"><p>
<tt>example$ cmake -DDISABLE_KDEUI=1
-DCMAKE_INSTALL_PREFIX=/home/bab/software ..</tt>
</p></div>
<p>
Regina will now install its various components in the subdirectories
<tt>/home/bab/software/bin</tt>,
<tt>/home/bab/software/lib</tt>,
<tt>/home/bab/software/share</tt> and so on.
</p>
<p>
You should pass an <b>absolute path</b> as your install prefix
(not <tt>~/software</tt> or <tt>../software</tt>, for instance).
It is best if this is not the directory in which
you unpacked Regina's sources, since otherwise you may find it hard to
untangle sources from binaries later on.
</p>
<!--h4>Finding library dependencies</h4>
<p>
You may find that some of Regina's dependencies (such as
<i>gmp</i>, <i>popt</i>, <i>libxml2</i> or <i>cppunit</i>)
are not installed on the cluster.
The easy solution is to mail the sysadmin and ask her to install these
dependencies for you (remember to ask for the development files, not
just the runtime libraries).  However, this is not always an option.  In
this case you will need to install the dependencies beneath your
home directory.  This involves two steps:
</p>
<ul>
<li><p>Build and install the dependencies, using the same prefix as before.
For instance, if you are building <i>popt</i> then pass your prefix to
the <i>popt</i> configure script:</p>
<div class="example"><p>
<tt>example:~/sources/popt-1.7$ ./configure --prefix=/home/bab/software</tt>
</p></div>
<p>
You should now find the dependencies installed across
<tt>/home/bab/software/lib</tt>,
<tt>/home/bab/software/include</tt> and so on.
</p>
</li>
<li><p>Tell Regina where to find this software.  For generic libraries
this involves passing the configure arguments
<tt>--with-extra-libs</tt> and <tt>--with-extra-includes</tt>,
giving the <tt>lib</tt> and <tt>include</tt> subdirectories of your
prefix:
</p>
<div class="example"><p>
<tt>example:~/sources/regina-4.6$ ./configure
--with-extra-libs=/home/bab/software/lib
--with-extra-includes=/home/bab/software/include</tt>
</p></div>
<p>Some specific libraries (specifically <i>libxml2</i> and
<i>cppunit</i>) have their own configure arguments, which take the
prefix instead (not its subdirectories):
</p>
<div class="example"><p>
<tt>example:~/sources/regina-4.6$ ./configure
--with-xml-prefix=/home/bab/software
--with-cppunit-prefix=/home/bab/software</tt>
</p></div></li>
</ul>
<p>
For reference, the full configure line used by the author to build
Regina on the <a href="http://www.vpac.org/">VPAC clusters</a> is:
</p>
<div class="example"><p>
<tt>example$ ./configure
--disable-kdeui
--prefix=/home/bab/software
--with-extra-libs=/home/bab/software/lib
--with-extra-includes=/home/bab/software/include
--with-cppunit-prefix=/home/bab/software</tt>
</p></div>
<p>
Depending on the GNU/Linux distribution used on your cluster, it may
also be worth reading other sections of this page
(including the section on <a href="#64bit">64-bit systems</a>).
</p-->
<h4>Compiling your own software against Regina</h4>
<p>
Once Regina is built and installed, you may wish to compile it
into your own C++ programs.  The helper script <tt>regina-engine-config</tt>
gives you all of the necessary compiler and linker options for doing this.
You can find this script with the other programs in
<tt><i>prefix</i>/bin</tt>, where <tt><i>prefix</i></tt> is your
installation prefix.
</p>
<p>
To obtain a full set of compiler options:
</p>
<div class="example"><p>
<tt>example$ regina-engine-config --cflags</tt>
</p></div>
<p>
To obtain a full set of linker options:
</p>
<div class="example"><p>
<tt>example$ regina-engine-config --libs</tt>
</p></div>
<p>
You can use this script directly on the command-line (or in your
Makefile).  So, for instance, to compile the program <tt>myprog.cpp</tt>
against Regina:
</p>
<div class="example"><p>
<tt>example$ g++ `regina-engine-config --cflags --libs` myprog.cpp
-o myprog</tt>
</p></div>

<p class="return">
<a href="index.html"><img src="return.jpg" alt="Back to main page ..."
    border="0" width="32" height="32" align="middle"></a>
<a href="index.html">Back to main page ...</a></p>

</body>
</html>

